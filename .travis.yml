dist: xenial
services:
  - docker
cache:
  directories:
    - .autoconf
before_install:
  - wget https://product-dist.ballerina.io/downloads/0.991.0/ballerina-linux-installer-x64-0.991.0.deb
  - sudo dpkg -i ballerina*.deb
  - wget https://wso2.org/jenkins/view/cellery/job/cellery/job/sdk/lastSuccessfulBuild/artifact/installers/ubuntu-x64/target/*zip*/target.zip
  - unzip target.zip
  - export KUBERNETES_MASTER=192.168.1.1
  - sudo dpkg -i target/cellery*.deb
script:
  - cellery build foo.bal myorg/foo:${TRAVIS_COMMIT}
  - cellery update foo myorg/foo:${TRAVIS_COMMIT}